package com.example.demo.config;

import org.ehcache.config.builders.CacheManagerBuilder;
import org.ehcache.xml.XmlConfiguration;
import org.ehcache.CacheManager;
import org.springframework.cache.annotation.EnableCaching;
import org.springframework.cache.ehcache.EhCacheCacheManager;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.net.URL;

@Configuration
@EnableCaching
public class CacheConfig {

    @Bean
    public org.springframework.cache.CacheManager cacheManager() {
        URL configUrl = getClass().getResource("/ehcache.xml");
        XmlConfiguration xmlConfig = new XmlConfiguration(configUrl);
        CacheManager ehcacheManager = CacheManagerBuilder.newCacheManager(xmlConfig);
        ehcacheManager.init();
        return new EhCacheCacheManager(new net.sf.ehcache.CacheManager(configUrl)); // Adapter for Spring
    }
}
